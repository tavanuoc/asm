(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{1118:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),i=n(10),a=n(2),c=n(0),l=function(e){return Object(c.a)({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18 7c.542 0 1 .458 1 1v7c0 .542-.458 1-1 1h-8.829l-.171.171v-.171h-3c-.542 0-1-.458-1-1v-7c0-.542.458-1 1-1h12m0-2h-12c-1.65 0-3 1.35-3 3v7c0 1.65 1.35 3 3 3h1v3l3-3h8c1.65 0 3-1.35 3-3v-7c0-1.65-1.35-3-3-3z"}}]})(e)};l.displayName="TiMessage";var s=n(101),u=n(59),p=(n(26),n(36),n(80)),d=n(89),f=n(9),m=n(17),b=n(16);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=a.default.div.withConfig({displayName:"ProductReport__Wrapper",componentId:"sc-1pdz2xs-0"})([".","{&__toggler{color:#007ff0;display:flex;align-items:center;cursor:pointer;margin-bottom:12px;}}"],"product-report"),w=a.default.div.withConfig({displayName:"ProductReport__ModalContent",componentId:"sc-1pdz2xs-1"})([".modal{&__header{border-bottom:1px solid #ccc;padding:10px 20px;margin-bottom:20px;&__text{font-size:18px;}&__close{cursor:pointer;position:absolute;top:-11px;right:-12px;border-radius:50%;background-color:#fff;box-shadow:-1px 1px 1px #969696;padding:0;border:0;}}&__footer{border-top:1px solid #ccc;padding:10px 20px;text-align:right;&__button{border:1px solid #189eff;color:#fff;background:#189eff;margin-left:16px;border-radius:3px;padding:6px 16px;&[disabled]{cursor:not-allowed;opacity:0.8;}&--default{background:#fff;border:1px solid #e0e0e0;color:#000;}}}&__description{padding:0 20px;font-size:13px;margin-bottom:20px;line-height:16px;}&__form-item{padding:0 20px;margin-bottom:16px;display:flex;flex-wrap:wrap;&__label{flex:0 0 40%;padding-top:7px;}&__input{flex:0 0 60%;textarea{width:100%;border:1px solid #ccc;border-radius:3px;height:118px;}}&__error{margin-top:7px;padding-left:40%;flex:0 0 100%;color:#f00;font-size:13px;}}&__success{text-align:center;img{height:64px;}h3{margin:12px 0;}p{margin-bottom:20px;}}}"]),O=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=this,r=(e=_(t)).call.apply(e,[this].concat(a)),n=!r||"object"!==h(r)&&"function"!=typeof r?g(o):r,x(g(n),"state",{visible:!1,loading:!0,reportDictionary:{issue_dictionary:{}},descriptionError:!1,submitError:null,submitting:!1}),x(g(n),"toggleModal",function(e){var t=n.props,o=t.isLogin,r=t.handleLoginModal;if(!o)return r(!0);n.state.loading&&n.fetchDictionary(),n.setState({visible:!n.state.visible,descriptionError:!1,submitError:null,success:!1})}),x(g(n),"fetchDictionary",function(){Object(f.a)({url:"".concat("https://seller-store-api.tiki.vn","/issue-reports-dictionary")}).then(function(e){var t=e.data;n.setState({loading:!1,reportDictionary:t})})}),x(g(n),"changeIssue",function(e){var t=n.props.form,o=t.setFieldsValue;t.resetFields;o({issue_location:e.value,issue_type:null})}),x(g(n),"changeIssueType",function(e){(0,n.props.form.setFieldsValue)({issue_type:e.value})}),x(g(n),"onSubmit",function(){var e=n.props.form,t=e.getFieldValue,o=e.validateFields;n.setState({descriptionError:!1}),o(function(e,o){if(!e){var r=n.state.reportDictionary.mandatory_description_fields,i=t("description"),a=t("issue_type"),c=t("issue_location");if(a&&r.includes(a)&&(!i||0==i.length))return void n.setState({descriptionError:!0});var l=n.props,s=l.customer,u=l.isLogin,p=l.product;if(u&&s&&0!=s.id){var d={user_id:s.id,user_email:s.email,subject_id:p.id,title:p.title,issue_location:c,issue_type:a,description:i,subject:"pdp",environment:"web",context:"consumer"};n.setState({submitting:!0}),Object(f.a)({url:"https://seller-store-api.tiki.vn/issue-reports",method:"POST",data:d}).then(function(){n.setState({submitting:!1,submitError:null,success:!0})}).catch(function(e){var t=(e||{}).response,o=(t=void 0===t?{}:t).data,r=(o=void 0===o?{}:o).message,i=void 0===r?"Có lỗi sảy ra":r;n.setState({submitting:!1,submitError:i})})}}})}),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.state,t=e.visible,n=e.loading,o=e.reportDictionary,i=e.descriptionError,a=e.submitError,c=e.submitting,s=e.success,f=this.props.form,m=f.getFieldDecorator,b=f.getFieldError,h=f.getFieldValue,y=h("issue_location");h("issue_type");return r.a.createElement(E,null,r.a.createElement("div",{className:"product-report"},r.a.createElement("div",{onClick:this.toggleModal,className:"".concat("product-report","__toggler")},r.a.createElement(l,{size:22})," Phản ánh thông tin sản phẩm không chính xác.")),r.a.createElement(u.a,{isOpen:t,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:this.toggleModal,style:{maxWidth:750,margin:"20vh auto",maxHeight:600,outline:"none"}},r.a.createElement(w,null,n&&r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(d.a,{style:{margin:100}})),!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal__header"},r.a.createElement("div",{className:"modal__header__text"},"Phản ánh sản phẩm"),r.a.createElement("button",{className:"modal__header__close",onClick:this.toggleModal},r.a.createElement("span",{className:"tikicon icon-circle-close"}))),!s&&r.a.createElement(r.a.Fragment,null,m("issue_location",{initialValue:null,rules:[{required:!0}]})(r.a.createElement("input",{type:"hidden"})),m("issue_type",{initialValue:null,rules:[{required:!0}]})(r.a.createElement("input",{type:"hidden"})),r.a.createElement("div",{className:"modal__description"},"Vui lòng chỉ phản ánh các thông tin liên quan đến nội dung mô tả và thông tin sản phẩm. Các vấn đề liên quan đến vận hành (đơn hàng, chất lượng sản phẩm) vui lòng liên hệ tổng đài 1900-6035 để được hỗ trợ."),r.a.createElement("div",{className:"modal__form-item"},r.a.createElement("div",{className:"modal__form-item__label"},"Vui lòng chọn vấn đề cần phản ánh"),r.a.createElement("div",{className:"modal__form-item__input"},r.a.createElement(p.a,{placeholder:"Chọn vấn đề cần gửi phản ánh",onChange:this.changeIssue,options:Object.keys(o.issue_dictionary).map(function(e){return{label:o.issue_dictionary[e].title,value:e}})})),b("issue_location")&&r.a.createElement("div",{className:"modal__form-item__error"},"Vui lòng chọn")),y&&r.a.createElement("div",{className:"modal__form-item"},r.a.createElement("div",{className:"modal__form-item__label"}),r.a.createElement("div",{className:"modal__form-item__input"},r.a.createElement(p.a,{key:y,placeholder:"Chi tiết vấn đề",onChange:this.changeIssueType,options:Object.keys(o.issue_dictionary[y].issue_types).map(function(e){return{label:o.issue_dictionary[y].issue_types[e],value:e}})})),b("issue_type")&&r.a.createElement("div",{className:"modal__form-item__error"},"Vui lòng chọn")),r.a.createElement("div",{className:"modal__form-item"},r.a.createElement("div",{className:"modal__form-item__label"},"Mô tả vấn đề"),r.a.createElement("div",{className:"modal__form-item__input"},m("description",{})(r.a.createElement("textarea",null))),i&&r.a.createElement("div",{className:"modal__form-item__error"},"Vui lòng mô tả vấn đề"),null!==a&&r.a.createElement("div",{className:"modal__form-item__error"},a))),s&&r.a.createElement("div",{className:"modal__success"},r.a.createElement("img",{src:"https://tiki.vn/desktop/img/report-product/success.svg"}),r.a.createElement("h3",null,"Tiki cám ơn bạn đã phản ánh về sản phẩm"),r.a.createElement("p",null,"Vấn đề của bạn đã được tiếp nhận, chúng tôi sẽ xử lý và phản hồi trong thời gian sớm nhất.")),r.a.createElement("div",{className:"modal__footer"},!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"modal__footer__button modal__footer__button--default",onClick:this.toggleModal},"Hủy"),r.a.createElement("button",{className:"modal__footer__button",onClick:this.onSubmit},c?"Đang gửi phản ánh":"Gửi phản ánh")),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"modal__footer__button",onClick:this.toggleModal},"Đóng")))))))}}])&&y(n.prototype,o),i&&y(n,i),t}(),k=Object(s.a)()(O);t.default=Object(i.b)(function(e){return{customer:e.desktop.app.customer,isLogin:e.desktop.app.login}},function(e){return{handleLoginModal:Object(m.b)(b.h,e)}})(k)},26:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var o=n(1),r=n.n(o),i=n(2);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){f(e,t,n[t])})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=i.default.input.withConfig({displayName:"Input",componentId:"sc-17i9bto-0"})(["transition:border-color ease-in-out 0.15s,box-shadow ease-in-out 0.15s,-webkit-box-shadow ease-in-out 0.15s;border:1px solid #ccc;border-radius:4px;height:34px;padding:6px 12px;line-height:34px;outline:none;&:focus{border-color:#66afe9;}"," ","::-webkit-input-placeholder{color:#a6a6a6;}:-ms-input-placeholder{color:#a6a6a6;}::placeholder{color:#a6a6a6;}"],function(e){return e.error&&"border-color: #843534;"},function(e){return e.success&&"border-color: #2b542c;"}),b=i.default.textarea.withConfig({displayName:"Input__TextArea",componentId:"sc-17i9bto-1"})(["transition:border-color ease-in-out 0.15s,box-shadow ease-in-out 0.15s,-webkit-box-shadow ease-in-out 0.15s;border:1px solid #ccc;border-radius:4px;padding:6px 12px;line-height:20px;outline:none;&:focus{border-color:#66afe9;}"," ","::-webkit-input-placeholder{color:#a6a6a6;}:-ms-input-placeholder{color:#a6a6a6;}::placeholder{color:#a6a6a6;}"],function(e){return e.error&&"border-color: #843534;"},function(e){return e.success&&"border-color: #2b542c;"}),h=i.default.label.withConfig({displayName:"Input__RadioFake",componentId:"sc-17i9bto-2"})(["display:inline-block;cursor:pointer;vertical-align:middle;.icon-radio-button-off{display:inline-block;}.icon-radio-button-on{display:none;}input:checked + span{.icon-radio-button-off{display:none;}.icon-radio-button-on{display:block;}}"]),y=i.default.label.withConfig({displayName:"Input__CheckboxFake",componentId:"sc-17i9bto-3"})(["display:inline-block;cursor:pointer;vertical-align:middle;.icon-check-off{display:inline-block;}.icon-check-on{display:none;}input:checked + span{.icon-check-off{display:none;}.icon-check-on{display:block;}}"]),_=function(e){return r.a.createElement(h,{style:d({},e.style)},r.a.createElement("input",p({name:e.name,type:"radio"},e,{style:{display:"none"}})),r.a.createElement("span",null,r.a.createElement("i",{className:"tikicon icon-radio-button-on"}),r.a.createElement("i",{className:"tikicon icon-radio-button-off"})))},g=function(e){return r.a.createElement(y,{style:d({},e.style)},r.a.createElement("input",p({name:e.name,type:"checkbox"},e,{style:{display:"none"}})),r.a.createElement("span",null,r.a.createElement("i",{className:"tikicon icon-check-on"}),r.a.createElement("i",{className:"tikicon icon-check-off"})))},v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,s(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props;switch(e.type){case"checkbox":return r.a.createElement(g,e);case"radio":return r.a.createElement(_,e);case"textarea":return r.a.createElement(b,p({},e,{value:e.value||""}));default:return r.a.createElement(m,p({type:"text"},e,{value:e.value||""}))}}}])&&c(n.prototype,o),i&&c(n,i),t}()},36:function(e,t,n){"use strict";var o=n(2);t.a=o.default.div.withConfig({displayName:"InputError",componentId:"bdny64-0"})(["color:#a94442;font-size:11px;margin-top:5px;",""],function(e){return e.ml&&"margin-left: ".concat(e.ml,"px;")})},89:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n(1),r=n.n(o),i=n(2);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=Object(i.keyframes)(["0%{transform:rotateZ(0deg);}100%{transform:rotateZ(360deg);}"]),m=i.default.div.withConfig({displayName:"Loader__Root",componentId:"c26pk3-0"})(["display:inline-block;position:relative;width:",";height:",";div{box-sizing:border-box;display:block;position:absolute;width:",";height:",";border:","px solid #fff;border-radius:50%;animation:"," 1s cubic-bezier(0.5,0,0.5,1) infinite;border-color:"," transparent transparent transparent;}div:nth-child(1){animation-delay:-0.45s;}div:nth-child(2){animation-delay:-0.3s;}div:nth-child(3){animation-delay:-0.15s;}"],function(e){return"".concat(e.width,"px")},function(e){return"".concat(e.width,"px")},function(e){return"".concat(e.width-e.border,"px")},function(e){return"".concat(e.width-e.border,"px")},function(e){return e.border},f,function(e){return e.color}),b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,p(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.width,n=e.border,o=e.color,i=e.style;return r.a.createElement(m,{style:c({},i),width:t||30,border:n||2,color:o||"#189eff"},r.a.createElement("div",null))}}])&&s(n.prototype,o),i&&s(n,i),t}()}}]);