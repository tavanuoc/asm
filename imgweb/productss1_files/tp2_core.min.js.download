function _CPA(e){var t=this;document.location.host.split(".");t._domain=document.location.host,0<=t._domain.indexOf("vccloud.vn")&&(t._domain=".vccloud.vn"),t.getItemId(document.location.pathname),void 0===(e=void 0===e?{}:e).rtg_id&&(e.rtg_id=0),t.cpabd_param=e,t.cpabd_logged=!1}window.ADS_CPA_CHECKER={cpa:!0,cookies:{tid:"__tid",tp:"__tpn",iid:"__iid",src:"__src",su:"__su",st:"__st",v:"__v",sv:"__sv",domain:"__d"}},window.ADS_CPA_DOMAINS={"lg1.logging.admicro.vn":"contineljs.com"},_CPA.prototype.getRandom=function(){return Math.floor(1e3*Math.random()+1)},_CPA.prototype.getItemId=function(e){var t=this,o=null;if(null==e||"/"==e)return o;switch(t._domain){case"www.lazada.vn":document.getElementById("pdtsku")&&(o=(o=document.getElementById("pdtsku").innerHTML).replace(/[\r\n]+/g,""))}return null!=o&&""!=o&&t.setCookie(window.ADS_CPA_CHECKER.cookies.v,o,30,t._domain),o},_CPA.prototype.setValue=function(e,t){var o=this;return o.cpabd_param.v=e+"###"+t,o.setCookie(window.ADS_CPA_CHECKER.cookies.v,o.cpabd_param.v,30,o._domain),o},_CPA.prototype.getUId=function(){var e="-1";try{e=ADM_AdsTracking.get("__uid")}catch(e){}return e},_CPA.prototype.getUIdDomain=function(){var e=-1;try{e=void 0!==(e=localStorage.__uidac)?e:-1}catch(e){}return e},_CPA.prototype.init=function(){var e,t,o=this,i=o.cpabd_param,a=o.getParam("cpa_tid"),n=o.getCookie("__tid"),d=o.getCookie("__iid");"undefined"==n&&(n="",o.setCookie("__tid","",30,o._domain)),""!=a&&(n=a,o.setCookie("__tid",a,30,o._domain),""!=(e=0<(e=parseInt(o.getParam("tpn")))?-1:e)&&o.setCookie("__tpn",e,30,o._domain),""!=(t=o.getParam("ma"))&&null!=t&&o.setCookie("__ma",t,30,o._domain));var c=0,c="undefined"!=typeof _CPA_CONVERSION_PAGE?_CPA_CONVERSION_PAGE:c;i.tid=n,i.s=void 0!==i.s?i.s:c,i.iid=void 0!==i.iid?i.iid:d,"undefined"!=d&&""!=d||o.setCookie("__iid",i.iid,30,o._domain);i.st=void 0!==i.st?i.st:-1,o.cpabd_param=i},_CPA.prototype.getDomainReferer=function(){var e=this,t=e.getParam("dmn");return""!=t?e.setCookie("__d",t,30,e._domain):t=e.getCookie("__d"),""!=t?t:-1},_CPA.prototype.getParam=function(e){var t="";return(e=new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)").exec(location.search))&&(t=decodeURIComponent(e[1])),t},_CPA.prototype.getCookie=function(e){return 0<document.cookie.length&&(c_start=document.cookie.indexOf(e+"="),-1!=c_start)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""},_CPA.prototype.setCookie=function(e,t,o,i){var a=new Date;a.setDate(a.getDate()+o),document.cookie=e+"="+escape(t)+(null==o?"":";path=/;domain="+i+";expires="+a.toUTCString()),document.cookie=e+"="+escape(t)+(null==o?"":";path=/;expires="+a.toUTCString())},_CPA.prototype.isMobile=function(){var e=window.ADS_CPA_CHECKER.cookies.src;return"MOB"==this.getCookie(e)},_CPA.prototype.getType=function(){var e=parseInt(this.getCookie("__tpn")),t=-1;switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:t=e}return t},_CPA.prototype.getProductType=function(){var e=parseInt(this.getCookie("__tpn"));return 0<e?e:-1},_CPA.prototype.send=function(e){(new Image).src=e},_CPA.prototype.start=function(e){var t=this,o=t.cpabd_param,e=void 0===e||1==e?1:0,i="",a=window.ADS_CPA_DOMAINS["lg1.logging.admicro.vn"];void 0!==o.iid&&null!=o.iid&&(i=o.iid),""!=i&&t.setCookie("__iid",o.iid,30,t._domain);var n=new RegExp("^[0-9a-zA-Z-]+$");if(""!=o.tid&&0==n.test(o.tid))return!1;o.tid=""==o.tid?"-1":o.tid;var d=document.location.href;d=(d=d.replace("&cpa_tid="+o.tid,"")).replace("cpa_tid="+o.tid,"");var c="//"+a+"/cpa2"+"?tid="+o.tid+"&path="+encodeURIComponent(d);1==t.getCookie(window.ADS_CPA_CHECKER.cookies.su)&&(o.s=1),void 0!==o.s&&0<=o.s&&(c+="&success="+encodeURIComponent(o.s),t.setCookie(window.ADS_CPA_CHECKER.cookies.su,o.s,30,t._domain));var _=t.getCookie(window.ADS_CPA_CHECKER.cookies.v);""!=_&&null!=_&&(o.value=_),void 0!==o.value&&null!=o.value&&null!=i&&(i+="@@@"+o.value.replace(/\t/g," ")),""!=i&&(c+="&iid="+encodeURIComponent(i)),c+="&src="+t.getType(),c+="&ng="+t.getUId(),c+="&sdmn="+t.getDomainReferer(),c+="&dg="+t.getUIdDomain(),1==e&&(1==o.s&&t.setCookie(window.ADS_CPA_CHECKER.cookies.su,"",-30,t._domain),1==o.s&&t.setCookie(window.ADS_CPA_CHECKER.cookies.v,"",-30,t._domain),t.send(c)),1==e&&t.retargetingCreate(o.iid,o.rtg_id,o.value)},_CPA.prototype.setStepValue=function(e){var t=this;return t.cpabd_param.step_value=e,t.setCookie(window.ADS_CPA_CHECKER.cookies.sv,t.cpabd_param.step_value,30,t._domain),t},_CPA.prototype.step=function(e){var t,o,i,a,n=this,d=n.cpabd_param,e=void 0===e||1==e?1:0,c=n.getCookie(window.ADS_CPA_CHECKER.cookies.st),_=window.ADS_CPA_DOMAINS["lg1.logging.admicro.vn"];d.st=0<c&&""!=c?c:d.st,0==e?(0<(c=void 0!==d.st?d.st:-1)&&n.setCookie(window.ADS_CPA_CHECKER.cookies.st,c,30,n._domain),void 0!==d.step_value&&""!=d.step_value&&n.setCookie(window.ADS_CPA_CHECKER.cookies.sv,d.step_value,30,n._domain)):1==e&&0<d.st&&(new RegExp("^[0-9a-zA-Z-]+$"),d.tid=""==d.tid?"-1":d.tid,t="",o=(o=(o=document.location.href).replace("&cpa_tid="+d.tid,"")).replace("cpa_tid="+d.tid,""),i="//"+_+"/cpa2"+"?tid="+d.tid+"&path="+encodeURIComponent(o)+"&success=2",void 0!==d.iid&&null!=d.iid&&(t=d.iid),""!=(a=n.getCookie(window.ADS_CPA_CHECKER.cookies.sv))&&null!=a&&(d.step_value=a),void 0!==d.step_value&&null!=d.step_value&&null!=t&&(t+="@@@"+d.step_value.replace(/\t/g," ")),""!=t&&(i+="&iid="+encodeURIComponent(t)),i+="&src="+n.getType(),i+="&sdmn="+n.getDomainReferer(),i+="&dg="+n.getUIdDomain(),i+="&st="+d.st,n.send(i),0<c&&n.setCookie(window.ADS_CPA_CHECKER.cookies.st,"",-30,n._domain),n.setCookie(window.ADS_CPA_CHECKER.cookies.sv,"",-30,n._domain))},_CPA.prototype.cleanURL=function(e){return e.replace(/[?&]+([^=&]*)[=]*([^&]*)/gi,"")},_CPA.prototype.retargetingCreate=function(e,t,o){if(void 0===e||""==e)return!1;var i=void 0===t?0:parseInt(t),a={url:encodeURIComponent(document.location.href),ref:encodeURIComponent(document.referrer),iid:encodeURIComponent(e),tp:encodeURIComponent(this.getProductType()),rtg_id:i,value:void 0!==o&&""!=o?o:-1,ui:this.getUId(),ce:1},n="//"+window.ADS_CPA_DOMAINS["lg1.logging.admicro.vn"]+"/rtg_bn?url="+a.url+"&rf="+a.ref+"&a="+a.iid+"&b="+a.tp+"&c="+a.rtg_id+"&d="+a.value+"&ui="+a.ui+"&ce="+a.ce;0<=window.navigator.userAgent.indexOf("Firefox")&&(a.amcui=this.getCookie("__amcdnuid"),n+="&amcui="+a.amcui),this.send(n)};var cpabd_param=void 0===cpabd_param?{}:cpabd_param,_cpabd=new _CPA(cpabd_param);_cpabd.init(),_cpabd.start(),_cpabd.step(),_cpabd.retargetingCreate(_cpabd.cpabd_param.rtg_id,_cpabd.cpabd_param.rtg_id),window.addEventListener?window.addEventListener("hashchange",function(){_cpabd.retargetingCreate(_cpabd.cpabd_param.rtg_id,_cpabd.cpabd_param.rtg_id)},!1):window.attachEvent&&window.attachEvent("onhashchange",function(){_cpabd.retargetingCreate(_cpabd.cpabd_param.rtg_id,_cpabd.cpabd_param.rtg_id)},!1);
