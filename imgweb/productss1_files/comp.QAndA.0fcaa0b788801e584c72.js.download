(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{1119:function(e,t,n){"use strict";n.r(t);var r=n(5),o=n.n(r),a=n(1),i=n.n(a),c=(n(3),n(2)),s=n(38),u=n.n(s),l=n(10),p=n(17),f=(n(429),n(16)),d=n(216),h=n(9);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=c.default.a.withConfig({displayName:"LikeButton__Wrapper",componentId:"ib7r1v-0"})(["cursor:pointer;display:flex;align-items:center;margin-right:35px;color:#888888;font-size:13px;font-weight:300;"," &:hover{color:#00afef;}.icon{margin-right:10px;margin-bottom:5px;}"],function(e){return e.thanked&&"\n    font-weight: 500;\n    color: #199dff;\n  "}),k=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=y(t).call(this,e),n=!a||"object"!==m(a)&&"function"!=typeof a?x(r):a,w(x(n),"onClick",function(){var e,t=(e=o.a.mark(function e(t){var r,a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.questionId,i=r.showError,e.prev=1,t.preventDefault(),a&&!n.state.thanked){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Object(h.a)({url:"/v2/questions/".concat(a,"/thank"),method:"POST"});case 7:return e.next=9,n.setState({thanked:!0});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&i({message:e.t0.response.data.error.message||"",code:e.t0.response.data.error.code||500});case 14:case"end":return e.stop()}},e,null,[[1,11]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){b(a,r,o,i,c,"next",e)}function c(e){b(a,r,o,i,c,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()),n.state={thanked:e.thanked||!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.state.thanked;return i.a.createElement(E,{onClick:this.onClick,thanked:e},i.a.createElement("i",{className:"icon thumb-up"}),e?"Đã thích":"Thích")}}])&&g(n.prototype,r),a&&g(n,a),t}();w(k,"defaultProps",{questionId:-1,thanked:!1,showError:function(){}});var _=n(217);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function C(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){S(a,r,o,i,c,"next",e)}function c(e){S(a,r,o,i,c,"throw",e)}i(void 0)})}}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=c.default.div.withConfig({displayName:"QAndA__Wrapper",componentId:"opige1-0"})(["margin-bottom:40px;.container{background-color:#ffffff;border-radius:4px;overflow:hidden;.help{margin:0;padding:0 20px 20px;list-style:none;li{font-size:12px;margin-bottom:10px;&:last-child{margin-bottom:0;color:#888888;}}a{color:#007ff0;}}}"]),I=c.default.div.withConfig({displayName:"QAndA__Question",componentId:"opige1-1"})(["display:flex;padding:20px 0;border-bottom:1px solid #f7f7f7;.like{width:110px;margin:0;color:#333333;font-size:24px;font-weight:400;text-align:center;span{display:block;margin-top:3px;color:#1c1c1c;font-size:13px;}}.content{flex:1;padding:0 20px 0 10px;p{margin:0 0 12px;}.question{color:#333333;font-size:15px;font-weight:500;}.answer{color:#787878;font-size:15px;font-weight:400;line-height:18px;}.author{color:#787878;font-size:12px;}.buttons{display:flex;margin-top:15px;a{cursor:pointer;display:flex;align-items:center;margin-right:35px;color:#888888;font-size:13px;font-weight:300;&:hover{color:#00afef;}.icon{margin-right:10px;margin-bottom:5px;}}}}"]),Q=c.default.a.withConfig({displayName:"QAndA__ViewAllButton",componentId:"opige1-2"})(["display:block;color:#007ff0;font-size:13px;font-weight:400;padding:15px 20px;border-bottom:1px solid #f7f7f7;"]),z=c.default.div.withConfig({displayName:"QAndA__Form",componentId:"opige1-3"})(["display:flex;padding:20px;.input-group{flex:1;input{width:100%;height:40px;padding:0 10px;font-size:13px;border:1px solid #e0e0e0;border-radius:4px;transition:border-color ease-in-out 0.15s,box-shadow ease-in-out 0.15s;&:focus{border-color:#66afe9;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(102,175,233,0.6);}}p{margin:5px 0 0 0;font-size:11px;font-weight:400;&.success{color:#26bc4e;}&.error{color:#a94442;}}}button{cursor:pointer;width:154px;height:40px;margin-left:10px;padding:0;color:#333333;font-size:13px;font-weight:500;background:#fdd22f;border:0;border-radius:4px;outline:none;&:hover{opacity:0.8;}}"]),D=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=j(t).call(this,e),n=!a||"object"!==O(a)&&"function"!=typeof a?N(r):a,T(N(n),"getData",C(o.a.mark(function e(){var t,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.props.productId,e.next=4,Object(h.a)({url:"/v2/questions?product_id=".concat(t,"&include=answers&sort=created_at|desc&limit=3")});case 4:if(!(r=e.sent)||!r.data){e.next=8;break}return e.next=8,n.setState({data:r.data});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Q_AND_A",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}))),T(N(n),"handleQuestionText",function(e){n.setState({questionText:e.target.value})}),T(N(n),"sendQuestion",function(){var e=C(o.a.mark(function e(t){var r,a,i,c,s,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.preventDefault(),r=(r=n.state.questionText).trim()){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,n.setState({questionSuccess:"",questionError:""});case 8:return a=n.props.productId,(i=new FormData).append("product_id",a),i.append("content",r),e.next=14,Object(h.a)({url:"/v2/questions",method:"POST",data:i});case 14:if(!((c=e.sent)&&c.data&&c.data.created)){e.next=19;break}return e.next=18,n.setState({questionSuccess:c.data.message||""});case 18:setTimeout(function(){n.setState({questionSuccess:"",questionText:""})},5e3);case 19:e.next=30;break;case 21:if(e.prev=21,e.t0=e.catch(0),console.log("Q_AND_A",e.t0),e.t0&&e.t0.response){e.next=26;break}return e.abrupt("return");case 26:s=e.t0.response,u="",s.data&&s.data.error&&(u=s.data.error.message||""),401===s.status?n.showError({message:u}):n.setState({questionError:u});case 30:case"end":return e.stop()}},e,null,[[0,21]])}));return function(t){return e.apply(this,arguments)}}()),T(N(n),"showError",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,r=e.code;n.setState({errorVisible:!0,errorMessage:t,errorCode:r})}),T(N(n),"onCloseError",function(){n.setState({errorVisible:!1,errorCode:"",errorMessage:"Có lỗi sảy ra"})}),T(N(n),"renderQuestions",function(){var e=n.props.urlKey,t=n.state.data;return(t=t&&t.data&&t.data.length>0?t.data:[]).map(function(t,r){return i.a.createElement(I,{key:r},i.a.createElement("p",{className:"like"},t.thank_count,i.a.createElement("span",null,"Thích")),i.a.createElement("div",{className:"content"},i.a.createElement("p",{className:"question"},t.content),t.answers&&t.answers.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"answer"},t.answers[0].content),i.a.createElement("p",{className:"author"},t.answers[0].created_by&&t.answers[0].created_by.name," trả lời vào"," ",u()(t.answers[0].created_at).format("DD/MM/YYYY"))):null,i.a.createElement("div",{className:"buttons"},i.a.createElement(k,{questionId:t.id,thanked:t.thanked,showError:function(e){return n.showError(e)}}),i.a.createElement("a",{href:"/".concat(e,"/hoi-dap/").concat(t.id)},i.a.createElement("i",{className:"icon reply-arrow"}),"Trả lời"))))})}),n.state={errorVisible:!1,errorMessage:"",errorCode:"",questionText:"",questionSuccess:"",questionError:"",data:void 0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(e,t){e.productId!==this.props.productId&&this.getData()}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.productId,o=this.state,a=o.errorVisible,c=o.errorMessage,s=o.errorCode,u=o.questionText,l=o.questionSuccess,p=o.questionError,f=o.data,h=0;return f&&f.paging&&f.paging.total&&(h=f.paging.total),i.a.createElement(A,null,i.a.createElement(d.a,null,n),i.a.createElement("div",{className:"container"},this.renderQuestions(),h>3&&i.a.createElement(Q,{href:"/product/".concat(r,"/hoi-dap")},"Xem tất cả các câu hỏi đã được trả lời"),i.a.createElement(z,null,i.a.createElement("div",{className:"input-group"},i.a.createElement("input",{type:"text",value:u,onChange:this.handleQuestionText,placeholder:"Hãy đặt câu hỏi liên quan đến sản phẩm..."}),""!=l&&i.a.createElement("p",{className:"success"},l),p&&i.a.createElement("p",{className:"error"},p)),i.a.createElement("button",{onClick:this.sendQuestion},"Gửi câu hỏi")),0===h&&i.a.createElement("ul",{className:"help"},i.a.createElement("li",null,"Các câu hỏi thường gặp về sản phẩm:"),i.a.createElement("li",null,"- Chế độ bảo hành cùng cách thức vận chuyển sản phẩm này thế nào?"),i.a.createElement("li",null,"- Kích thước sản phẩm này?"),i.a.createElement("li",null,"- Sản phẩm này có dễ dùng không?"),i.a.createElement("li",null,"Các câu hỏi liên quan đến sản phẩm hư hỏng, cần đổi trả, ... Vui lòng truy cập trang hỗ trợ"," ",i.a.createElement("a",{href:"https://hotro.tiki.vn",target:"_blank"},"https://hotro.tiki.vn")))),i.a.createElement(_.default,{style:{width:"401"==s?300:500},closeAble:!0,onCloseModal:this.onCloseError,footerLayout:"401"==s?"full":"normal",footer:"401"==s?i.a.createElement(i.a.Fragment,null,i.a.createElement(_.ModalButton,{type:"primary",onClick:function(){e.props.handleLoginModal(!0),e.onCloseError()}},"Đăng nhập")):null,visible:a},c))}}])&&q(n.prototype,r),a&&q(n,a),t}();T(D,"defaultProps",{productId:-1,urlKey:""});t.default=Object(l.b)(null,function(e){return{handleLoginModal:Object(p.b)(f.h,e)}})(D)}}]);